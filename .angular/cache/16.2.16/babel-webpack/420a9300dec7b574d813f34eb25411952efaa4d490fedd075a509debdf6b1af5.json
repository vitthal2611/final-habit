{"ast":null,"code":"import { computed, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HabitService } from '../../core/services/habit.service';\nimport { CardComponent } from '../../shared/ui/card.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/habit.service\";\nimport * as i2 from \"@angular/common\";\nfunction MetricsComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function MetricsComponent_button_7_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const level_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.activeLevel.set(level_r4));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"titlecase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const level_r4 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r0.activeLevel() === level_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 3, level_r4), \" \");\n  }\n}\nfunction MetricsComponent_div_9_app_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-card\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 8)(4, \"span\", 9);\n    i0.ɵɵtext(5, \"Consistency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 10);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 8)(9, \"span\", 9);\n    i0.ɵɵtext(10, \"Active days\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\", 10);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 8)(14, \"span\", 9);\n    i0.ɵɵtext(15, \"Trend\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\", 11);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const habit_r8 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(habit_r8.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r7.getMonthlyConsistency(habit_r8.id), \"%\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r7.getActiveDays(habit_r8.id));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r7.getTrend(habit_r8.id));\n  }\n}\nfunction MetricsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, MetricsComponent_div_9_app_card_1_Template, 18, 4, \"app-card\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.habits());\n  }\n}\nfunction MetricsComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-card\")(2, \"h3\");\n    i0.ɵɵtext(3, \"3-Month Overview\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8)(5, \"span\", 9);\n    i0.ɵɵtext(6, \"Habits maintained\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 8)(10, \"span\", 9);\n    i0.ɵɵtext(11, \"Average consistency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 10);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"p\", 12);\n    i0.ɵɵtext(15, \" You're building sustainable systems. Keep showing up. \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r2.habits().length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.getQuarterlyAverage(), \"%\");\n  }\n}\nfunction MetricsComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-card\")(2, \"h3\");\n    i0.ɵɵtext(3, \"Year in Review\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 8)(5, \"span\", 9);\n    i0.ɵɵtext(6, \"Total days showed up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 8)(10, \"span\", 9);\n    i0.ɵɵtext(11, \"Strongest habit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"span\", 10);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"p\", 13);\n    i0.ɵɵtext(15, \" This year, you became someone who shows up consistently. Every action reinforced your identity. \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r3.getYearlyTotal());\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r3.getStrongestHabit());\n  }\n}\nexport let MetricsComponent = /*#__PURE__*/(() => {\n  class MetricsComponent {\n    constructor(habitService) {\n      this.habitService = habitService;\n      this.activeLevel = signal('monthly');\n      this.levels = ['monthly', 'quarterly', 'yearly'];\n      this.habits = computed(() => this.habitService.allHabits());\n    }\n    getMonthlyConsistency(habitId) {\n      const logs = this.habitService.allLogs().filter(l => l.habitId === habitId && l.completed);\n      const daysInMonth = 30;\n      return Math.round(logs.length / daysInMonth * 100);\n    }\n    getActiveDays(habitId) {\n      return this.habitService.allLogs().filter(l => l.habitId === habitId && l.completed).length;\n    }\n    getTrend(habitId) {\n      return 'stable';\n    }\n    getQuarterlyAverage() {\n      const habits = this.habits();\n      if (habits.length === 0) return 0;\n      const total = habits.reduce((sum, h) => sum + this.getMonthlyConsistency(h.id), 0);\n      return Math.round(total / habits.length);\n    }\n    getYearlyTotal() {\n      return this.habitService.allLogs().filter(l => l.completed).length;\n    }\n    getStrongestHabit() {\n      const habits = this.habits();\n      if (habits.length === 0) return 'None yet';\n      let strongest = habits[0];\n      let maxConsistency = this.getMonthlyConsistency(habits[0].id);\n      habits.forEach(h => {\n        const consistency = this.getMonthlyConsistency(h.id);\n        if (consistency > maxConsistency) {\n          maxConsistency = consistency;\n          strongest = h;\n        }\n      });\n      return strongest.name;\n    }\n    static {\n      this.ɵfac = function MetricsComponent_Factory(t) {\n        return new (t || MetricsComponent)(i0.ɵɵdirectiveInject(i1.HabitService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: MetricsComponent,\n        selectors: [[\"app-metrics\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 12,\n        vars: 4,\n        consts: [[1, \"metrics-view\"], [1, \"subtitle\"], [1, \"tabs\"], [3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"metrics-content\"], [4, \"ngIf\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [1, \"metric-row\"], [1, \"label\"], [1, \"value\"], [1, \"value\", \"trend\"], [1, \"insight\"], [1, \"narrative\"]],\n        template: function MetricsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\")(2, \"h1\");\n            i0.ɵɵtext(3, \"Your Progress\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 1);\n            i0.ɵɵtext(5, \"Systems over goals\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 2);\n            i0.ɵɵtemplate(7, MetricsComponent_button_7_Template, 3, 5, \"button\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 4);\n            i0.ɵɵtemplate(9, MetricsComponent_div_9_Template, 2, 1, \"div\", 5);\n            i0.ɵɵtemplate(10, MetricsComponent_div_10_Template, 16, 2, \"div\", 5);\n            i0.ɵɵtemplate(11, MetricsComponent_div_11_Template, 16, 2, \"div\", 5);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.levels);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.activeLevel() === \"monthly\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.activeLevel() === \"quarterly\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.activeLevel() === \"yearly\");\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, i2.TitleCasePipe, CardComponent],\n        styles: [\".metrics-view[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}header[_ngcontent-%COMP%]{margin-bottom:24px}h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#111827;margin:0 0 4px}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 20px;background:none;border:none;border-bottom:2px solid transparent;color:#6b7280;font-size:15px;font-weight:500;cursor:pointer;transition:all .2s}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#6366f1;border-bottom-color:#6366f1}.metrics-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0 0 16px}.metric-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f3f4f6}.metric-row[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.label[_ngcontent-%COMP%]{font-size:14px;color:#6b7280}.value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#111827}.trend[_ngcontent-%COMP%]{text-transform:capitalize}.insight[_ngcontent-%COMP%], .narrative[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #f3f4f6;font-size:14px;color:#6b7280;font-style:italic;line-height:1.6}\"]\n      });\n    }\n  }\n  return MetricsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}