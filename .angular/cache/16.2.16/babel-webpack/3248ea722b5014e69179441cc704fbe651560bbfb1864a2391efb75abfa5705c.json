{"ast":null,"code":"import { signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { HabitService } from '../../core/services/habit.service';\nimport { ButtonComponent } from '../../shared/ui/button.component';\nimport { CardComponent } from '../../shared/ui/card.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/habit.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction HabitCreationComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"option\", 28);\n  }\n  if (rf & 2) {\n    const identity_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", identity_r4);\n  }\n}\nfunction HabitCreationComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"option\", 28);\n  }\n  if (rf & 2) {\n    const trigger_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", trigger_r5);\n  }\n}\nfunction HabitCreationComponent_div_51_label_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 31)(1, \"input\", 32);\n    i0.ɵɵlistener(\"change\", function HabitCreationComponent_div_51_label_4_Template_input_change_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const i_r8 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.toggleDay(i_r8));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const day_r7 = ctx.$implicit;\n    const i_r8 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r6.selectedDays().includes(i_r8));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", day_r7, \" \");\n  }\n}\nfunction HabitCreationComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"label\");\n    i0.ɵɵtext(2, \"Select days\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 29);\n    i0.ɵɵtemplate(4, HabitCreationComponent_div_51_label_4_Template, 3, 2, \"label\", 30);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.days);\n  }\n}\nfunction HabitCreationComponent_button_56_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function HabitCreationComponent_button_56_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const color_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.form.color = color_r11);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const color_r11 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"background\", color_r11);\n    i0.ɵɵclassProp(\"selected\", ctx_r3.form.color === color_r11);\n  }\n}\nexport let HabitCreationComponent = /*#__PURE__*/(() => {\n  class HabitCreationComponent {\n    constructor(habitService, router) {\n      this.habitService = habitService;\n      this.router = router;\n      this.form = {\n        name: '',\n        identity: '',\n        when: '',\n        time: '',\n        where: '',\n        cue: '',\n        twoMinuteRule: '',\n        frequency: 'daily',\n        color: '#6366f1',\n        difficulty: 'tiny',\n        contractCommitment: '',\n        accountabilityPartner: ''\n      };\n      this.days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n      this.selectedDays = signal([]);\n      this.uniqueTriggers = computed(() => {\n        const triggers = this.habitService.allHabits().map(h => h.trigger.when);\n        return [...new Set(triggers)].filter(t => t);\n      });\n      this.uniqueIdentities = computed(() => {\n        const identities = this.habitService.allHabits().map(h => h.identity);\n        return [...new Set(identities)].filter(i => i);\n      });\n      this.colors = ['#6366f1', '#ec4899', '#10b981', '#f59e0b', '#8b5cf6', '#06b6d4'];\n    }\n    toggleDay(day) {\n      const current = this.selectedDays();\n      if (current.includes(day)) {\n        this.selectedDays.set(current.filter(d => d !== day));\n      } else {\n        this.selectedDays.set([...current, day].sort());\n      }\n    }\n    onSubmit() {\n      const habit = {\n        id: self.crypto.randomUUID(),\n        name: this.form.name,\n        identity: this.form.identity,\n        trigger: {\n          when: this.form.when,\n          where: this.form.where\n        },\n        time: this.form.time,\n        cue: this.form.cue,\n        reward: '',\n        twoMinuteRule: this.form.twoMinuteRule || undefined,\n        frequency: this.form.frequency === 'daily' ? 'daily' : this.selectedDays(),\n        color: this.form.color,\n        createdAt: new Date(),\n        difficulty: this.form.difficulty\n      };\n      this.habitService.addHabit(habit);\n      this.router.navigate(['/']);\n    }\n    static {\n      this.ɵfac = function HabitCreationComponent_Factory(t) {\n        return new (t || HabitCreationComponent)(i0.ɵɵdirectiveInject(i1.HabitService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HabitCreationComponent,\n        selectors: [[\"app-habit-creation\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 72,\n        vars: 13,\n        consts: [[1, \"creation-flow\"], [1, \"subtitle\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"type\", \"text\", \"name\", \"name\", \"placeholder\", \"e.g., Drink a glass of water\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"identity\", \"list\", \"identityList\", \"placeholder\", \"e.g., a healthy person\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"identityList\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"form-row\"], [\"type\", \"text\", \"name\", \"when\", \"list\", \"whenList\", \"placeholder\", \"e.g., After I wake up\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"whenList\"], [\"type\", \"time\", \"name\", \"time\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"where\", \"placeholder\", \"In the kitchen\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"cue\", \"placeholder\", \"Water bottle on counter\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"twoMinuteRule\", \"placeholder\", \"e.g., Just put on my running shoes\", 3, \"ngModel\", \"ngModelChange\"], [1, \"hint\"], [\"name\", \"frequency\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"daily\"], [\"value\", \"custom\"], [\"class\", \"form-group\", 4, \"ngIf\"], [1, \"color-picker\"], [\"type\", \"button\", \"class\", \"color-option\", 3, \"selected\", \"background\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"difficulty\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"tiny\"], [\"value\", \"easy\"], [\"value\", \"moderate\"], [1, \"actions\"], [\"type\", \"submit\", \"variant\", \"primary\"], [3, \"value\"], [1, \"days-selector\"], [\"class\", \"day-checkbox\", 4, \"ngFor\", \"ngForOf\"], [1, \"day-checkbox\"], [\"type\", \"checkbox\", 3, \"checked\", \"change\"], [\"type\", \"button\", 1, \"color-option\", 3, \"click\"]],\n        template: function HabitCreationComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\")(2, \"h1\");\n            i0.ɵɵtext(3, \"Create a New Habit\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 1);\n            i0.ɵɵtext(5, \"Small actions, big identity shifts\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"app-card\")(7, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function HabitCreationComponent_Template_form_ngSubmit_7_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(8, \"div\", 3)(9, \"label\");\n            i0.ɵɵtext(10, \"What will you do?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"input\", 4);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_11_listener($event) {\n              return ctx.form.name = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 3)(13, \"label\");\n            i0.ɵɵtext(14, \"Who does this make you?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"input\", 5);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_15_listener($event) {\n              return ctx.form.identity = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"datalist\", 6);\n            i0.ɵɵtemplate(17, HabitCreationComponent_option_17_Template, 1, 1, \"option\", 7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"div\", 8)(19, \"div\", 3)(20, \"label\");\n            i0.ɵɵtext(21, \"When?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"input\", 9);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_22_listener($event) {\n              return ctx.form.when = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"datalist\", 10);\n            i0.ɵɵtemplate(24, HabitCreationComponent_option_24_Template, 1, 1, \"option\", 7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"div\", 3)(26, \"label\");\n            i0.ɵɵtext(27, \"Time\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"input\", 11);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_28_listener($event) {\n              return ctx.form.time = $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(29, \"div\", 3)(30, \"label\");\n            i0.ɵɵtext(31, \"Where?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"input\", 12);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_32_listener($event) {\n              return ctx.form.where = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(33, \"div\", 3)(34, \"label\");\n            i0.ɵɵtext(35, \"What's your cue?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"input\", 13);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_36_listener($event) {\n              return ctx.form.cue = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(37, \"div\", 3)(38, \"label\");\n            i0.ɵɵtext(39, \"2-Minute Rule (optional)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"input\", 14);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_input_ngModelChange_40_listener($event) {\n              return ctx.form.twoMinuteRule = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(41, \"p\", 15);\n            i0.ɵɵtext(42, \"Start with the smallest version of your habit\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(43, \"div\", 3)(44, \"label\");\n            i0.ɵɵtext(45, \"Frequency\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(46, \"select\", 16);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_select_ngModelChange_46_listener($event) {\n              return ctx.form.frequency = $event;\n            });\n            i0.ɵɵelementStart(47, \"option\", 17);\n            i0.ɵɵtext(48, \"Every day\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(49, \"option\", 18);\n            i0.ɵɵtext(50, \"Custom days\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(51, HabitCreationComponent_div_51_Template, 5, 1, \"div\", 19);\n            i0.ɵɵelementStart(52, \"div\", 3)(53, \"label\");\n            i0.ɵɵtext(54, \"Choose a color\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(55, \"div\", 20);\n            i0.ɵɵtemplate(56, HabitCreationComponent_button_56_Template, 1, 4, \"button\", 21);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(57, \"div\", 3)(58, \"label\");\n            i0.ɵɵtext(59, \"How hard is this habit?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(60, \"select\", 22);\n            i0.ɵɵlistener(\"ngModelChange\", function HabitCreationComponent_Template_select_ngModelChange_60_listener($event) {\n              return ctx.form.difficulty = $event;\n            });\n            i0.ɵɵelementStart(61, \"option\", 23);\n            i0.ɵɵtext(62, \"Tiny (2 min or less)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(63, \"option\", 24);\n            i0.ɵɵtext(64, \"Easy (5-10 min)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(65, \"option\", 25);\n            i0.ɵɵtext(66, \"Moderate (15+ min)\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(67, \"p\", 15);\n            i0.ɵɵtext(68, \"Start tiny. You can always do more.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(69, \"div\", 26)(70, \"app-button\", 27);\n            i0.ɵɵtext(71, \" Create Habit \");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(11);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.name);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.identity);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.uniqueIdentities());\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.when);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.uniqueTriggers());\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.time);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.where);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.cue);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.twoMinuteRule);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.frequency);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.form.frequency === \"custom\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.colors);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.form.difficulty);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, ButtonComponent, CardComponent],\n        styles: [\".creation-flow[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}header[_ngcontent-%COMP%]{margin-bottom:24px}h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#111827;margin:0 0 4px}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px}input[type=text][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:6px;font-size:15px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1}.days-selector[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.day-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:14px;cursor:pointer}.color-picker[_ngcontent-%COMP%]{display:flex;gap:12px}.color-option[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:3px solid transparent;cursor:pointer;transition:transform .2s}.color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.color-option.selected[_ngcontent-%COMP%]{border-color:#111827}.actions[_ngcontent-%COMP%]{margin-top:32px}.milestone-section[_ngcontent-%COMP%]{padding-top:20px;border-top:1px solid #e5e7eb}.milestone-section[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.milestone-section[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.milestone-inputs[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#f9fafb;border-radius:6px}.hint[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af;margin:4px 0 0;font-style:italic}.contract-section[_ngcontent-%COMP%]{padding-top:20px;border-top:1px solid #e5e7eb}.contract-section[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.contract-section[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.contract-inputs[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:#fef2f2;border-radius:6px;border-left:3px solid #ef4444}\"]\n      });\n    }\n  }\n  return HabitCreationComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}