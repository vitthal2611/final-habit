{"ast":null,"code":"import { computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HabitService } from '../../core/services/habit.service';\nimport { CardComponent } from '../../shared/ui/card.component';\nimport { ButtonComponent } from '../../shared/ui/button.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/habit.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction CalendarComponent_app_card_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-card\")(1, \"div\", 11)(2, \"div\", 12);\n    i0.ɵɵelement(3, \"div\", 13);\n    i0.ɵɵelementStart(4, \"div\")(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 14);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 15)(10, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_app_card_15_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const habit_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.toggleStatus(habit_r2.id));\n    });\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const habit_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"background\", habit_r2.color);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(habit_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(habit_r2.identity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"done\", ctx_r0.getStatus(habit_r2.id) === \"done\")(\"missed\", ctx_r0.getStatus(habit_r2.id) === \"missed\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getStatusLabel(habit_r2.id), \" \");\n  }\n}\nfunction CalendarComponent_div_20_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 23);\n  }\n  if (rf & 2) {\n    const habit_r7 = ctx.$implicit;\n    const day_r5 = i0.ɵɵnextContext().$implicit;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"background\", ctx_r6.isDayCompleted(habit_r7.id, day_r5.dateStr) ? habit_r7.color : \"#e5e7eb\");\n    i0.ɵɵclassProp(\"completed\", ctx_r6.isDayCompleted(habit_r7.id, day_r5.dateStr));\n    i0.ɵɵproperty(\"title\", habit_r7.name);\n  }\n}\nfunction CalendarComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18)(2, \"div\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 20);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 21);\n    i0.ɵɵtemplate(7, CalendarComponent_div_20_div_7_Template, 1, 5, \"div\", 22);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const day_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(day_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(day_r5.date);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.habits());\n  }\n}\nexport let CalendarComponent = /*#__PURE__*/(() => {\n  class CalendarComponent {\n    constructor(habitService) {\n      this.habitService = habitService;\n      this.selectedDate = this.formatDate(new Date());\n      this.today = this.formatDate(new Date());\n      this.habits = computed(() => this.habitService.allHabits());\n      this.weekDays = computed(() => {\n        const days = [];\n        const today = new Date();\n        for (let i = 6; i >= 0; i--) {\n          const date = new Date(today);\n          date.setDate(date.getDate() - i);\n          days.push({\n            name: date.toLocaleDateString('en-US', {\n              weekday: 'short'\n            }),\n            date: date.getDate(),\n            dateStr: this.formatDate(date)\n          });\n        }\n        return days;\n      });\n    }\n    onDateChange() {\n      // Trigger UI update\n    }\n    getStatus(habitId) {\n      return this.habitService.getHabitState(habitId, this.selectedDate);\n    }\n    getStatusLabel(habitId) {\n      const status = this.getStatus(habitId);\n      if (status === 'done') return '✓ Done';\n      if (status === 'missed') return 'Skipped';\n      return 'Pending';\n    }\n    toggleStatus(habitId) {\n      const current = this.getStatus(habitId);\n      if (current === 'pending') {\n        this.habitService.logHabit(habitId, this.selectedDate, true);\n      } else if (current === 'done') {\n        this.habitService.logHabit(habitId, this.selectedDate, false);\n      } else {\n        this.habitService.logHabit(habitId, this.selectedDate, true);\n      }\n    }\n    checkInAll() {\n      this.habits().forEach(habit => {\n        this.habitService.logHabit(habit.id, this.selectedDate, true);\n      });\n    }\n    isDayCompleted(habitId, dateStr) {\n      return this.habitService.getHabitState(habitId, dateStr) === 'done';\n    }\n    formatDate(date) {\n      return date.toISOString().split('T')[0];\n    }\n    formatDisplayDate() {\n      const date = new Date(this.selectedDate);\n      return date.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric'\n      });\n    }\n    static {\n      this.ɵfac = function CalendarComponent_Factory(t) {\n        return new (t || CalendarComponent)(i0.ɵɵdirectiveInject(i1.HabitService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CalendarComponent,\n        selectors: [[\"app-calendar\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 21,\n        vars: 5,\n        consts: [[1, \"calendar-view\"], [1, \"subtitle\"], [1, \"date-selector\"], [\"type\", \"date\", 3, \"ngModel\", \"max\", \"ngModelChange\", \"change\"], [1, \"bulk-actions\"], [\"variant\", \"primary\", 3, \"click\"], [1, \"habits-list\"], [4, \"ngFor\", \"ngForOf\"], [1, \"week-view\"], [1, \"week-grid\"], [\"class\", \"day-column\", 4, \"ngFor\", \"ngForOf\"], [1, \"habit-item\"], [1, \"habit-info\"], [1, \"habit-color\"], [1, \"identity\"], [1, \"habit-actions\"], [1, \"status-btn\", 3, \"click\"], [1, \"day-column\"], [1, \"day-header\"], [1, \"day-name\"], [1, \"day-date\"], [1, \"day-habits\"], [\"class\", \"habit-dot\", 3, \"completed\", \"background\", \"title\", 4, \"ngFor\", \"ngForOf\"], [1, \"habit-dot\", 3, \"title\"]],\n        template: function CalendarComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\")(2, \"h1\");\n            i0.ɵɵtext(3, \"Check-in Calendar\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 1);\n            i0.ɵɵtext(5, \"Log past habits or bulk check-in\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"app-card\")(7, \"div\", 2)(8, \"label\");\n            i0.ɵɵtext(9, \"Select Date\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"input\", 3);\n            i0.ɵɵlistener(\"ngModelChange\", function CalendarComponent_Template_input_ngModelChange_10_listener($event) {\n              return ctx.selectedDate = $event;\n            })(\"change\", function CalendarComponent_Template_input_change_10_listener() {\n              return ctx.onDateChange();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"div\", 4)(12, \"app-button\", 5);\n            i0.ɵɵlistener(\"click\", function CalendarComponent_Template_app_button_click_12_listener() {\n              return ctx.checkInAll();\n            });\n            i0.ɵɵtext(13);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(14, \"div\", 6);\n            i0.ɵɵtemplate(15, CalendarComponent_app_card_15_Template, 12, 9, \"app-card\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"div\", 8)(17, \"h2\");\n            i0.ɵɵtext(18, \"This Week Overview\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"div\", 9);\n            i0.ɵɵtemplate(20, CalendarComponent_div_20_Template, 8, 3, \"div\", 10);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"ngModel\", ctx.selectedDate)(\"max\", ctx.today);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\" \\u2713 Check-in All for \", ctx.formatDisplayDate(), \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.habits());\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.weekDays());\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, CardComponent, ButtonComponent],\n        styles: [\".calendar-view[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}header[_ngcontent-%COMP%]{margin-bottom:24px}h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#111827;margin:0 0 4px}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.date-selector[_ngcontent-%COMP%]{margin-bottom:16px}.date-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px}input[type=date][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:6px;font-size:15px}.bulk-actions[_ngcontent-%COMP%]{margin-top:16px}.habits-list[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-direction:column;gap:12px}.habit-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.habit-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.habit-color[_ngcontent-%COMP%]{width:4px;height:40px;border-radius:2px}h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#111827;margin:0 0 4px}.identity[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;font-style:italic;margin:0}.status-btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #d1d5db;border-radius:6px;background:white;color:#6b7280;font-size:14px;cursor:pointer;transition:all .2s}.status-btn.done[_ngcontent-%COMP%]{background:#10b981;color:#fff;border-color:#10b981}.status-btn.missed[_ngcontent-%COMP%]{background:#f3f4f6;color:#9ca3af;border-color:#e5e7eb}.week-view[_ngcontent-%COMP%]{margin-top:32px}h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#111827;margin:0 0 16px}.week-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}.day-column[_ngcontent-%COMP%]{background:white;border-radius:8px;padding:12px 8px;box-shadow:0 1px 3px #0000001a}.day-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #f3f4f6}.day-name[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase}.day-date[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;margin-top:2px}.day-habits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.habit-dot[_ngcontent-%COMP%]{height:24px;border-radius:4px;transition:all .2s}.habit-dot.completed[_ngcontent-%COMP%]{opacity:1}@media (max-width: 640px){.week-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr);gap:4px}.day-column[_ngcontent-%COMP%]{padding:8px 4px}.habit-dot[_ngcontent-%COMP%]{height:16px}}\"]\n      });\n    }\n  }\n  return CalendarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}