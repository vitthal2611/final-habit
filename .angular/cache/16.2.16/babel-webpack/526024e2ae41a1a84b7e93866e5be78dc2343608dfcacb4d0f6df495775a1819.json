{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction HabitCardModernComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"span\", 2);\n    i0.ɵɵtext(2, \"\\u26A1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.habit.twoMinuteRule);\n  }\n}\nfunction HabitCardModernComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"span\", 2);\n    i0.ɵɵtext(2, \"\\uD83D\\uDCA1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.habit.cue);\n  }\n}\nfunction HabitCardModernComponent_button_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function HabitCardModernComponent_button_31_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.complete.emit());\n    });\n    i0.ɵɵelementStart(1, \"span\", 22);\n    i0.ɵɵtext(2, \"\\u2713\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"Vote\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HabitCardModernComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24);\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F Never Miss Twice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 25);\n    i0.ɵɵtext(4, \"Missing once is an accident. Missing twice is the start of a new habit. Get back on track quickly.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HabitCardModernComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"span\", 27);\n    i0.ɵɵtext(2, \"\\u2713\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"div\", 28);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 29);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r4.habit.reward);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"You are \", ctx_r4.habit.identity, \"\");\n  }\n}\nfunction HabitCardModernComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"span\");\n    i0.ɵɵtext(2, \"Not today\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let HabitCardModernComponent = /*#__PURE__*/(() => {\n  class HabitCardModernComponent {\n    constructor() {\n      this.state = 'pending';\n      this.weeklyConsistency = {\n        completed: 0,\n        total: 7\n      };\n      this.complete = new EventEmitter();\n    }\n    getVoteCount() {\n      if (!this.habitService) return 0;\n      return this.habitService.allLogs().filter(l => l.habitId === this.habit.id && l.completed).length;\n    }\n    missedYesterday() {\n      if (!this.habitService) return false;\n      const yesterday = new Date();\n      yesterday.setDate(yesterday.getDate() - 1);\n      const dateStr = yesterday.toISOString().split('T')[0];\n      return this.habitService.getHabitState(this.habit.id, dateStr) === 'missed';\n    }\n    static {\n      this.ɵfac = function HabitCardModernComponent_Factory(t) {\n        return new (t || HabitCardModernComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HabitCardModernComponent,\n        selectors: [[\"app-habit-card-modern\"]],\n        inputs: {\n          habit: \"habit\",\n          state: \"state\",\n          weeklyConsistency: \"weeklyConsistency\",\n          habitService: \"habitService\"\n        },\n        outputs: {\n          complete: \"complete\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 43,\n        vars: 17,\n        consts: [[1, \"card\"], [1, \"badge\"], [1, \"icon\"], [1, \"vote-count\"], [1, \"grid\"], [1, \"box\"], [1, \"label\"], [1, \"text\"], [\"class\", \"two-minute\", 4, \"ngIf\"], [\"class\", \"cue\", 4, \"ngIf\"], [\"class\", \"btn\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"never-miss-twice\", 4, \"ngIf\"], [\"class\", \"done\", 4, \"ngIf\"], [\"class\", \"missed\", 4, \"ngIf\"], [1, \"progress\"], [1, \"progress-top\"], [1, \"count\"], [1, \"bar\"], [1, \"fill\"], [1, \"two-minute\"], [1, \"cue\"], [1, \"btn\", 3, \"click\"], [1, \"btn-icon\"], [1, \"never-miss-twice\"], [1, \"warning-title\"], [1, \"warning-text\"], [1, \"done\"], [1, \"check\"], [1, \"done-text\"], [1, \"done-sub\"], [1, \"missed\"]],\n        template: function HabitCardModernComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"span\", 2);\n            i0.ɵɵtext(3, \"\\u2728\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"span\");\n            i0.ɵɵtext(5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"span\", 3);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"div\", 6);\n            i0.ɵɵtext(11, \"When\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 7);\n            i0.ɵɵtext(13);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"div\", 5)(15, \"div\", 6);\n            i0.ɵɵtext(16, \"I will\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"div\", 7);\n            i0.ɵɵtext(18);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"div\", 5)(20, \"div\", 6);\n            i0.ɵɵtext(21, \"At\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\", 7);\n            i0.ɵɵtext(23);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"div\", 5)(25, \"div\", 6);\n            i0.ɵɵtext(26, \"Where\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"div\", 7);\n            i0.ɵɵtext(28);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(29, HabitCardModernComponent_div_29_Template, 5, 1, \"div\", 8);\n            i0.ɵɵtemplate(30, HabitCardModernComponent_div_30_Template, 5, 1, \"div\", 9);\n            i0.ɵɵtemplate(31, HabitCardModernComponent_button_31_Template, 5, 0, \"button\", 10);\n            i0.ɵɵtemplate(32, HabitCardModernComponent_div_32_Template, 5, 0, \"div\", 11);\n            i0.ɵɵtemplate(33, HabitCardModernComponent_div_33_Template, 8, 2, \"div\", 12);\n            i0.ɵɵtemplate(34, HabitCardModernComponent_div_34_Template, 3, 0, \"div\", 13);\n            i0.ɵɵelementStart(35, \"div\", 14)(36, \"div\", 15)(37, \"span\");\n            i0.ɵɵtext(38, \"This week\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"span\", 16);\n            i0.ɵɵtext(40);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(41, \"div\", 17);\n            i0.ɵɵelement(42, \"div\", 18);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵstyleProp(\"--color\", ctx.habit.color);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.habit.identity);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"\", ctx.getVoteCount(), \" votes\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.habit.trigger.when);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.habit.name);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.habit.time);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.habit.trigger.where);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.habit.twoMinuteRule);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.habit.cue);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.state === \"pending\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.state === \"pending\" && ctx.missedYesterday());\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.state === \"done\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.state === \"missed\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\"\", ctx.weeklyConsistency.completed, \"/7\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵstyleProp(\"width\", ctx.weeklyConsistency.completed / 7 * 100, \"%\");\n          }\n        },\n        dependencies: [CommonModule, i1.NgIf],\n        styles: [\".card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:24px;box-shadow:0 2px 12px #00000014;border-left:4px solid var(--color)}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:linear-gradient(135deg,rgba(99,102,241,.1),rgba(139,92,246,.1));border-radius:20px;font-size:12px;font-weight:700;color:#6366f1;text-transform:uppercase;letter-spacing:.5px;margin-bottom:20px}.vote-count[_ngcontent-%COMP%]{margin-left:4px;padding:2px 8px;background:#6366f1;color:#fff;border-radius:10px;font-size:11px}.icon[_ngcontent-%COMP%]{font-size:16px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}.box[_ngcontent-%COMP%]{padding:16px;background:#f9fafb;border-radius:12px;border:1px solid #f3f4f6}.label[_ngcontent-%COMP%]{font-size:10px;font-weight:700;color:#6366f1;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}.text[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#111827;line-height:1.4}.btn[_ngcontent-%COMP%]{width:100%;padding:16px;background:var(--color);color:#fff;border:none;border-radius:14px;font-size:16px;font-weight:700;display:flex;align-items:center;justify-content:center;gap:10px;cursor:pointer;box-shadow:0 4px 12px #00000026;margin-bottom:20px;transition:transform .2s}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.done[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#d1fae5,#a7f3d0);border-radius:14px;margin-bottom:20px}.check[_ngcontent-%COMP%]{width:32px;height:32px;background:#059669;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700}.done-text[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#065f46}.done-sub[_ngcontent-%COMP%]{font-size:13px;color:#047857}.missed[_ngcontent-%COMP%]{padding:14px;text-align:center;background:#f9fafb;border-radius:12px;font-size:14px;color:#9ca3af;margin-bottom:20px}.progress[_ngcontent-%COMP%]{padding:16px;background:#fafafa;border-radius:14px}.progress-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:13px;font-weight:600;color:#6b7280}.count[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--color)}.bar[_ngcontent-%COMP%]{height:8px;background:#e5e7eb;border-radius:4px;overflow:hidden}.fill[_ngcontent-%COMP%]{height:100%;background:var(--color);transition:width .3s}.two-minute[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#fef3c7,#fde68a);border-radius:12px;margin-bottom:20px;font-size:13px;font-weight:600;color:#92400e}.cue[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#dbeafe,#bfdbfe);border-radius:12px;margin-bottom:20px;font-size:13px;font-weight:600;color:#1e40af}.never-miss-twice[_ngcontent-%COMP%]{padding:16px;background:linear-gradient(135deg,#fef2f2,#fee2e2);border-radius:12px;border-left:4px solid #ef4444;margin-bottom:20px}.warning-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#991b1b;margin-bottom:6px}.warning-text[_ngcontent-%COMP%]{font-size:12px;color:#7f1d1d;line-height:1.5}\"]\n      });\n    }\n  }\n  return HabitCardModernComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}