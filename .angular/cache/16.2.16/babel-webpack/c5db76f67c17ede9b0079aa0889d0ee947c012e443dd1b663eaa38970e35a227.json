{"ast":null,"code":"import { signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HabitService } from '../../core/services/habit.service';\nimport { CardComponent } from '../../shared/ui/card.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/habit.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ReviewComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ReviewComponent_button_7_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const period_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.activePeriod.set(period_r5));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"titlecase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const period_r5 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"active\", ctx_r0.activePeriod() === period_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 3, period_r5), \" \");\n  }\n}\nfunction ReviewComponent_div_9_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"span\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 12);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const habit_r9 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(habit_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r8.getWeeklyProgress(habit_r9.id), \" / 7\");\n  }\n}\nfunction ReviewComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-card\")(2, \"h3\");\n    i0.ɵɵtext(3, \"This Week\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ReviewComponent_div_9_div_4_Template, 5, 2, \"div\", 7);\n    i0.ɵɵelementStart(5, \"div\", 8)(6, \"label\");\n    i0.ɵɵtext(7, \"What helped you show up this week?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"textarea\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ReviewComponent_div_9_Template_textarea_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.weeklyReflection = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.habits());\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.weeklyReflection);\n  }\n}\nfunction ReviewComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-card\")(2, \"h3\");\n    i0.ɵɵtext(3, \"This Month\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 13);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 8)(7, \"label\");\n    i0.ɵɵtext(8, \"What can you simplify next month?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"textarea\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ReviewComponent_div_10_Template_textarea_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.monthlyReflection = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" You showed up \", ctx_r2.getMonthlyTotal(), \" times this month. \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.monthlyReflection);\n  }\n}\nfunction ReviewComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-card\")(2, \"h3\");\n    i0.ɵɵtext(3, \"Past 3 Months\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 13);\n    i0.ɵɵtext(5, \" You've been building your identity through consistent action. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 8)(7, \"label\");\n    i0.ɵɵtext(8, \"Which identity did you live into the most?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"textarea\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ReviewComponent_div_11_Template_textarea_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.quarterlyReflection = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.quarterlyReflection);\n  }\n}\nfunction ReviewComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-card\")(2, \"h3\");\n    i0.ɵɵtext(3, \"This Year\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 14);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 8)(7, \"label\");\n    i0.ɵɵtext(8, \"How have you grown this year?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"textarea\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function ReviewComponent_div_12_Template_textarea_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.yearlyReflection = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" This year, you showed up \", ctx_r4.getYearlyTotal(), \" times. You proved to yourself that you are someone who follows through. Every small action reinforced your identity. \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.yearlyReflection);\n  }\n}\nexport let ReviewComponent = /*#__PURE__*/(() => {\n  class ReviewComponent {\n    constructor(habitService) {\n      this.habitService = habitService;\n      this.activePeriod = signal('weekly');\n      this.periods = ['weekly', 'monthly', 'quarterly', 'yearly'];\n      this.weeklyReflection = '';\n      this.monthlyReflection = '';\n      this.quarterlyReflection = '';\n      this.yearlyReflection = '';\n      this.habits = () => this.habitService.allHabits();\n    }\n    getWeeklyProgress(habitId) {\n      const today = new Date();\n      const {\n        completed\n      } = this.habitService.getWeeklyConsistency(habitId, today);\n      return completed;\n    }\n    getMonthlyTotal() {\n      return this.habitService.allLogs().filter(l => l.completed).length;\n    }\n    getYearlyTotal() {\n      return this.habitService.allLogs().filter(l => l.completed).length;\n    }\n    static {\n      this.ɵfac = function ReviewComponent_Factory(t) {\n        return new (t || ReviewComponent)(i0.ɵɵdirectiveInject(i1.HabitService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ReviewComponent,\n        selectors: [[\"app-review\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 13,\n        vars: 5,\n        consts: [[1, \"review-view\"], [1, \"subtitle\"], [1, \"tabs\"], [3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"review-content\"], [4, \"ngIf\"], [3, \"click\"], [\"class\", \"habit-summary\", 4, \"ngFor\", \"ngForOf\"], [1, \"reflection-prompt\"], [\"placeholder\", \"Your thoughts...\", \"rows\", \"4\", 3, \"ngModel\", \"ngModelChange\"], [1, \"habit-summary\"], [1, \"habit-name\"], [1, \"progress\"], [1, \"insight\"], [1, \"narrative\"], [\"placeholder\", \"Your thoughts...\", \"rows\", \"6\", 3, \"ngModel\", \"ngModelChange\"]],\n        template: function ReviewComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\")(2, \"h1\");\n            i0.ɵɵtext(3, \"Reflection\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 1);\n            i0.ɵɵtext(5, \"Learn from your journey\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 2);\n            i0.ɵɵtemplate(7, ReviewComponent_button_7_Template, 3, 5, \"button\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 4);\n            i0.ɵɵtemplate(9, ReviewComponent_div_9_Template, 9, 2, \"div\", 5);\n            i0.ɵɵtemplate(10, ReviewComponent_div_10_Template, 10, 2, \"div\", 5);\n            i0.ɵɵtemplate(11, ReviewComponent_div_11_Template, 10, 1, \"div\", 5);\n            i0.ɵɵtemplate(12, ReviewComponent_div_12_Template, 10, 2, \"div\", 5);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.periods);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.activePeriod() === \"weekly\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.activePeriod() === \"monthly\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.activePeriod() === \"quarterly\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.activePeriod() === \"yearly\");\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, i2.TitleCasePipe, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, CardComponent],\n        styles: [\".review-view[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}header[_ngcontent-%COMP%]{margin-bottom:24px}h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#111827;margin:0 0 4px}.subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px;border-bottom:1px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 16px;background:none;border:none;border-bottom:2px solid transparent;color:#6b7280;font-size:14px;font-weight:500;cursor:pointer}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:#6366f1;border-bottom-color:#6366f1}h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#111827;margin:0 0 16px}.habit-summary[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #f3f4f6}.habit-name[_ngcontent-%COMP%]{font-size:15px;color:#374151}.progress[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#111827}.insight[_ngcontent-%COMP%], .narrative[_ngcontent-%COMP%]{font-size:15px;color:#6b7280;line-height:1.6;margin-bottom:20px}.reflection-prompt[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid #f3f4f6}.reflection-prompt[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:15px;font-weight:500;color:#374151;margin-bottom:8px}textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:6px;font-size:14px;font-family:inherit;resize:vertical}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1}\"]\n      });\n    }\n  }\n  return ReviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}