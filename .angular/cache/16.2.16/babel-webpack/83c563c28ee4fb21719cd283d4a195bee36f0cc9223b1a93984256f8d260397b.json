{"ast":null,"code":"import { computed, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Router } from '@angular/router';\nimport { HabitService } from '../../core/services/habit.service';\nimport { HabitCardModernComponent } from './habit-card/habit-card-modern.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/habit.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction DailyViewComponent_app_habit_card_modern_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-habit-card-modern\", 6);\n    i0.ɵɵlistener(\"complete\", function DailyViewComponent_app_habit_card_modern_8_Template_app_habit_card_modern_complete_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const habit_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onComplete(habit_r2.id));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const habit_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"habit\", habit_r2)(\"state\", ctx_r0.getHabitState(habit_r2.id))(\"weeklyConsistency\", ctx_r0.getWeeklyConsistency(habit_r2.id))(\"habitService\", ctx_r0.habitService);\n  }\n}\nfunction DailyViewComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8);\n    i0.ɵɵtext(2, \"\\u2728\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h2\");\n    i0.ɵɵtext(4, \"Start Your Journey\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 9);\n    i0.ɵɵtext(6, \"No habits for today. Build better habits, one day at a time.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function DailyViewComponent_div_9_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.createHabit());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(8, \"svg\", 11);\n    i0.ɵɵelement(9, \"line\", 12)(10, \"line\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \" Create Your First Habit \");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let DailyViewComponent = /*#__PURE__*/(() => {\n  class DailyViewComponent {\n    constructor(habitService, router) {\n      this.habitService = habitService;\n      this.router = router;\n      this.today = signal(new Date());\n      this.todayHabits = computed(() => {\n        const dayOfWeek = this.today().getDay();\n        return this.habitService.allHabits().filter(habit => {\n          if (habit.frequency === 'daily') return true;\n          return Array.isArray(habit.frequency) && habit.frequency.includes(dayOfWeek);\n        });\n      });\n    }\n    createHabit() {\n      this.router.navigate(['/create']);\n    }\n    getHabitState(habitId) {\n      return this.habitService.getHabitState(habitId, this.formatDate(this.today()));\n    }\n    getWeeklyConsistency(habitId) {\n      return this.habitService.getWeeklyConsistency(habitId, this.today());\n    }\n    getNote(habitId) {\n      const log = this.habitService.allLogs().find(l => l.habitId === habitId && l.date === this.formatDate(this.today()));\n      return log?.note || '';\n    }\n    onComplete(habitId) {\n      this.habitService.logHabit(habitId, this.formatDate(this.today()), true);\n    }\n    onNoteChange(habitId, note) {\n      const currentState = this.getHabitState(habitId);\n      this.habitService.logHabit(habitId, this.formatDate(this.today()), currentState === 'done', note);\n    }\n    onMilestoneAdd(habitId, count) {\n      const dateStr = this.formatDate(this.today());\n      const log = this.habitService.allLogs().find(l => l.habitId === habitId && l.date === dateStr);\n      this.habitService.logHabit(habitId, dateStr, true, log?.note, count);\n    }\n    formatDate(date) {\n      return date.toISOString().split('T')[0];\n    }\n    static {\n      this.ɵfac = function DailyViewComponent_Factory(t) {\n        return new (t || DailyViewComponent)(i0.ɵɵdirectiveInject(i1.HabitService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DailyViewComponent,\n        selectors: [[\"app-daily-view\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 10,\n        vars: 6,\n        consts: [[1, \"daily-view\"], [1, \"header\"], [1, \"date\"], [1, \"habits-list\"], [3, \"habit\", \"state\", \"weeklyConsistency\", \"habitService\", \"complete\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [3, \"habit\", \"state\", \"weeklyConsistency\", \"habitService\", \"complete\"], [1, \"empty-state\"], [1, \"empty-icon\"], [1, \"empty-text\"], [1, \"create-btn\", 3, \"click\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\"], [\"x1\", \"12\", \"y1\", \"5\", \"x2\", \"12\", \"y2\", \"19\"], [\"x1\", \"5\", \"y1\", \"12\", \"x2\", \"19\", \"y2\", \"12\"]],\n        template: function DailyViewComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"header\", 1)(2, \"h1\");\n            i0.ɵɵtext(3, \"Today\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 2);\n            i0.ɵɵtext(5);\n            i0.ɵɵpipe(6, \"date\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 3);\n            i0.ɵɵtemplate(8, DailyViewComponent_app_habit_card_modern_8_Template, 1, 4, \"app-habit-card-modern\", 4);\n            i0.ɵɵtemplate(9, DailyViewComponent_div_9_Template, 12, 0, \"div\", 5);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 3, ctx.today(), \"EEEE, MMMM d\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.todayHabits());\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.todayHabits().length === 0);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.DatePipe, HabitCardModernComponent],\n        styles: [\".daily-view[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.header[_ngcontent-%COMP%]{margin-bottom:32px}h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111827;margin:0 0 4px}.date[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0}.habits-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:white;border-radius:20px;box-shadow:0 2px 8px #00000014}.empty-icon[_ngcontent-%COMP%]{font-size:64px;margin-bottom:24px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#111827;margin:0 0 12px}.empty-text[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0 0 32px}.create-btn[_ngcontent-%COMP%]{padding:14px 28px;background:#6366f1;color:#fff;border:none;border-radius:12px;font-size:16px;font-weight:600;display:inline-flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s;box-shadow:0 4px 12px #6366f14d}.create-btn[_ngcontent-%COMP%]:hover{background:#4f46e5;transform:translateY(-2px);box-shadow:0 6px 16px #6366f166}\"]\n      });\n    }\n  }\n  return DailyViewComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}